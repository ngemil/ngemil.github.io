<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ngemil Mart - Cemilan & Sembako Gen Z</title>
  <meta name="description" content="Order cepat via WhatsApp!">
  <link rel="manifest" href="data:application/manifest+json,{\"name\":\"Ngemil Mart\",\"short_name\":\"Ngemil\",\"start_url\":\".\",\"display\":\"standalone\",\"background_color\":\"#0EA5E9\",\"theme_color\":\"#0EA5E9\",\"icons\":[{\"src\":\"https://ngemil.github.io/icon-192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\"},{\"src\":\"https://ngemil.github.io/icon-512.png\",\"sizes\":\"512x512\",\"type\":\"image/png\"}]}">
  <meta name="theme-color" content="#0EA5E9">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Fredoka+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

  <style>
    :root{--primary:#0EA5E9;--secondary:#38BDF8;--accent:#10B981;--danger:#EF4444;--dark:#1E293B;--light:#F0F9FF;--gray:#64748B;--radius:24px;--shadow:0 15px 40px rgba(14,165,233,.22);--transition:all .4s ease}
    [data-theme="dark"]{--light:#0F172A;--dark:#E2E8F0;--gray:#94A3B8}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Poppins',sans-serif;background:var(--light);color:var(--dark);line-height:1.7;opacity:0;transition:var(--transition)}
    body.loaded{opacity:1}
    .container{max-width:1320px;margin:0 auto;padding:0 20px}
    header{background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;padding:20px 0;position:sticky;top:0;z-index:1200;box-shadow:0 8px 30px rgba(14,165,233,.35)}
    .header-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}
    .logo{font-family:'Fredoka One',cursive;font-size:2.5em;text-shadow:0 5px 15px rgba(0,0,0,.4)}
    .search-bar{flex:1;max-width:600px;position:relative}
    .search-bar input{width:100%;padding:18px 70px 18px 28px;border:none;border-radius:35px;font-size:1.1em;background:rgba(255,255,255,.95);box-shadow:0 8px 25px rgba(0,0,0,.15)}
    .search-bar button{position:absolute;right:12px;top:12px;background:var(--accent);color:white;border:none;width:52px;height:52px;border-radius:50%;cursor:pointer;font-size:1.4em}
    .icon-btn{font-size:1.9em;cursor:pointer;position:relative;transition:var(--transition)}
    .icon-btn:hover{transform:scale(1.2)}
    .cart-count{position:absolute;top:-14px;right:-14px;background:var(--danger);color:white;width:32px;height:32px;border-radius:50%;font-size:.9em;font-weight:bold;display:flex;align-items:center;justify-content:center;animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(239,68,68,.7)}70%{box-shadow:0 0 0 14px rgba(239,68,68,0)}}
    .hero{background:linear-gradient(rgba(14,165,233,.9),rgba(56,189,248,.9)),url('https://images.unsplash.com/photo-1606890658317-7ff038f79e73?auto=format&fit=crop&w=1600&q=80') center/cover;color:white;text-align:center;padding:160px 20px;border-radius:0 0 50px 50px}
    .hero h1{font-size:4.8em;margin-bottom:25px;text-shadow:0 10px 30px rgba(0,0,0,.6)}
    .section-title{text-align:center;font-size:3em;margin:100px 0 70px;color:var(--primary);position:relative}
    .section-title::after{content:'';width:140px;height:7px;background:var(--secondary);display:block;margin:25px auto;border-radius:4px}
    .cat-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:40px;padding:60px 0}
    .cat-card{text-align:center;padding:40px 25px;border-radius:var(--radius);background:white;box-shadow:var(--shadow);cursor:pointer;transition:var(--transition)}
    .cat-card:hover{transform:translateY(-20px);box-shadow:0 30px 60px rgba(14,165,233,.35)}
    .cat-icon{font-size:4.5em;margin-bottom:20px;color:var(--primary)}
    .product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:45px;padding:60px 0}
    .product-card{background:white;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);transition:var(--transition);position:relative;cursor:pointer}
    .product-card:hover{transform:translateY(-20px);box-shadow:0 35px 70px rgba(14,165,233,.4)}
    .badge{position:absolute;top:15px;left:15px;background:#EF4444;color:white;padding:8px 16px;border-radius:20px;font-size:.9em;font-weight:bold;z-index:2}
    .badge.limited{background:#F59E0B}.badge.discount{background:#10B981}
    .product-img{width:100%;height:250px;object-fit:cover}
    .product-body{padding:30px}
    .product-name{font-weight:600;font-size:1.2em;margin-bottom:15px}
    .product-price{font-size:1.8em;font-weight:800;color:var(--primary);margin-bottom:20px}
    .add-to-cart{width:100%;padding:18px;background:var(--primary);color:white;border:none;border-radius:16px;font-weight:700;font-size:1.1em;cursor:pointer}

    /* MODAL DETAIL */
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);z-index:2000;align-items:center;justify-content:center;padding:20px}
    .modal.show{display:flex}
    .modal-content{background:white;border-radius:var(--radius);max-width:600px;width:100%;max-height:90vh;overflow-y:auto;position:relative;animation:zoomIn .4s}
    @keyframes zoomIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
    .modal-close{position:absolute;top:15px;right:20px;font-size:2em;cursor:pointer;color:#999;z-index:10}
    .modal-img{width:100%;height:320px;object-fit:cover;border-radius:var(--radius) var(--radius) 0 0}
    .modal-body{padding:30px}
    .modal-title{font-size:2em;font-weight:700;margin-bottom:15px;color:var(--primary)}
    .modal-price{font-size:2.2em;font-weight:800;color:var(--primary);margin-bottom:20px}
    .spec-grid{display:grid;grid-template-columns:max-content 1fr;gap:12px 20px;margin:25px 0;font-size:1.1em}
    .spec-label{font-weight:600;color:var(--gray)}
    .spec-value{color:var(--dark)}
    .modal-desc{margin:25px 0;line-height:1.8;color:#444}
    .modal-actions{display:flex;gap:15px;margin-top:30px}
    .btn-large{flex:1;padding:18px;border:none;border-radius:16px;font-size:1.2em;font-weight:700;cursor:pointer}
    .btn-primary{background:var(--primary);color:white}
    .btn-accent{background:var(--accent);color:white}

    .cart-sidebar{position:fixed;right:-500px;top:0;width:500px;max-width:95vw;height:100%;background:white;box-shadow:-15px 0 60px rgba(14,165,233,.35);transition:.6s cubic-bezier(.22,.61,.36,1);z-index:1300;padding:35px;overflow-y:auto}
    .cart-sidebar.open{right:0}
    .checkout-btn{width:100%;padding:20px;background:var(--accent);color:white;border:none;border-radius:16px;font-size:1.3em;font-weight:700;cursor:pointer}
    .toast{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:var(--accent);color:white;padding:20px 50px;border-radius:60px;box-shadow:0 15px 40px rgba(16,185,129,.5);z-index:9999;opacity:0;transition:.5s;font-weight:700;font-size:1.2em}
    .toast.show{opacity:1;bottom:80px}
    #scrollTop{position:fixed;bottom:35px;right:35px;background:var(--primary);color:white;width:70px;height:70px;border-radius:50%;display:none;align-items:center;justify-content:center;font-size:2.2em;cursor:pointer;box-shadow:0 12px 35px rgba(14,165,233,.5);z-index:998}
    footer{background:var(--dark);color:white;text-align:center;padding:100px 20px 50px;margin-top:150px}
    .visitor-count{font-size:1.5em;color:var(--secondary);margin-bottom:40px;font-weight:600}
    @media(max-width:768px){.hero h1{font-size:3em}.product-grid{grid-template-columns:1fr 1fr}}
  </style>
</head>
<body>

<header>
  <div class="container">
    <div class="header-content">
      <div class="logo">Ngemil Mart</div>
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Cari produk...">
        <button><i class="fas fa-search"></i></button>
      </div>
      <div style="display:flex;gap:28px;align-items:center">
        <i class="fas fa-moon icon-btn" id="themeToggle"></i>
        <div class="icon-btn" onclick="toggleCart()">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </div>
      </div>
    </div>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1>Ngemil Mart</h1>
    <p>Cemilan Hits + Sembako Murah — Order Langsung via WhatsApp!</p>
  </div>
</section>

<section class="categories">
  <div class="container">
    <h2 class="section-title">Kategori</h2>
    <div class="cat-grid">
      <div class="cat-card" onclick="filterCategory('')"><div class="cat-icon">Pizza</div><div>Semua</div></div>
      <div class="cat-card" onclick="filterCategory('cemilan')"><div class="cat-icon">Snack</div><div>Cemilan</div></div>
      <div class="cat-card" onclick="filterCategory('beras')"><div class="cat-icon">Rice Bowl</div><div>Beras</div></div>
      <div class="cat-card" onclick="filterCategory('minyak')"><div class="cat-icon">Water Drop</div><div>Minyak</div></div>
      <div class="cat-card" onclick="filterCategory('gula')"><div class="cat-icon">Cookie</div><div>Gula & Tepung</div></div>
      <div class="cat-card" onclick="filterCategory('lainnya')"><div class="cat-icon">Box</div><div>Lainnya</div></div>
    </div>
  </div>
</section>

<section class="products">
  <div class="container">
    <h2 class="section-title">Semua Produk</h2>
    <div class="product-grid" id="productList"></div>
  </div>
</section>

<!-- MODAL DETAIL PRODUK -->
<div class="modal" id="productModal">
  <div class="modal-content">
    <i class="fas fa-times modal-close" onclick="closeModal()"></i>
    <img id="modalImg" class="modal-img">
    <div class="modal-body">
      <div class="modal-title" id="modalName"></div>
      <div class="modal-price" id="modalPrice"></div>
      <div class="spec-grid">
        <div class="spec-label">Berat Bersih</div><div class="spec-value" id="modalWeight"></div>
        <div class="spec-label">Isi Per Pack</div><div class="spec-value" id="modalPack"></div>
        <div class="spec-label">Kadaluarsa</div><div class="spec-value" id="modalExp"></div>
        <div class="spec-label">Stok</div><div class="spec-value" id="modalStock"></div>
      </div>
      <div class="modal-desc" id="modalDesc"></div>
      <div class="modal-actions">
        <button class="btn-large btn-primary" onclick="closeModal()">Tutup</button>
        <button class="btn-large btn-accent" id="modalAddBtn">+ Keranjang</button>
      </div>
    </div>
  </div>
</div>

<!-- KERANJANG -->
<div class="cart-sidebar" id="cartSidebar">
  <div style="display:flex;justify-content:space-between;align-items:center;padding-bottom:20px;border-bottom:2px solid #eee;margin-bottom:25px">
    <h3 style="margin:0;font-size:1.8em">Keranjang (<span id="cartTotalItems">0</span>)</h3>
    <i class="fas fa-times" onclick="toggleCart()" style="cursor:pointer;font-size:2em;color:#999"></i>
  </div>
  <div id="cartItems" style="margin-bottom:30px"></div>
  <div style="font-size:1.7em;font-weight:700;text-align:right;margin:30px 0;color:var(--primary)">
    Total: Rp <span id="cartTotalPrice">0</span>
  </div>
  <button class="checkout-btn" onclick="checkout()">Checkout via WhatsApp</button>
  <button onclick="clearCart()" style="width:100%;margin-top:12px;padding:14px;background:#EF4444;color:white;border:none;border-radius:12px;font-weight:600;cursor:pointer;display:none" id="clearCartBtn">
    Kosongkan Keranjang
  </button>
</div>

<div class="toast" id="toast">Ditambahkan!</div>
<div id="scrollTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">Up</div>

<footer>
  <div class="container">
    <div class="visitor-count">Pengunjung hari ini: <span id="visitorCount">0</span> orang</div>
    <p>© 2025 Ngemil Mart — 1 file HTML ajaib</p>
  </div>
</footer>

<script>
const products = [
  {id:1,name:"Risoles Mozzarella Lumer",price:15000,category:"cemilan",img:"https://images.unsplash.com/photo-1606890658317-7ff038f79e73?w=800",badge:"Hot",weight:"100 gram",pack:"1 pcs",exp:"3 hari (kulkas)",stock:"48 pcs",desc:"Risoles isi mozzarella lumer 100% keju asli. Digoreng dadakan, renyah di luar, lumer di dalam!"},
  {id:2,name:"Keripik Singkong Balado",price:12000,category:"cemilan",img:"https://images.unsplash.com/photo-1624353365286-3b689189b3f3?w=800",weight:"200 gram",pack:"1 bungkus",exp:"2 bulan",stock:"120 bungkus",desc:"Keripik singkong premium dengan bumbu balado autentik. Pedas manis pas!"},
  {id:3,name:"Beras Ramos 5kg",price:75000,category:"beras",img:"https://images.unsplash.com/photo-1586201375761-83865001bdd6?w=800",badge:"Stok Terbatas",weight:"5 kg",pack:"1 karung",exp:"1 tahun",stock:"23 karung",desc:"Beras premium Ramos, pulen dan wangi. Cocok untuk semua masakan."},
  {id:4,name:"Minyak Goreng Bimoli 2L",price:35000,category:"minyak",img:"https://images.unsplash.com/photo-1621939514643-280e5c90473c?w=800",weight:"2 liter",pack:"1 botol",exp:"2 tahun",stock:"85 botol",desc:"Minyak goreng jernih, tidak berbusa, tahan lama."},
  {id:5,name:"Gula Pasir 1kg",price:15000,category:"gula",img:"https://images.unsplash.com/photo-1626645734936-d81f1b4d0c80?w=800",weight:"1 kg",pack:"1 bungkus",exp:"3 tahun",stock:"200 bungkus",desc:"Gula pasir murni, kristal bersih, manis pas."},
  {id:6,name:"Telur Ayam Kampung 10 butir",price:28000,category:"lainnya",img:"https://images.unsplash.com/photo-1509440159596-0249088772ff?w=800",weight:"600 gram",pack:"10 butir",exp:"1 bulan",stock:"50 pak",desc:"Telur ayam kampung asli, kuning telur besar & kental."}
];

let cart = JSON.parse(localStorage.getItem('ngemilCart2025')) || [];
const waNumber = "628999587888"; // GANTI NOMOR ANDA DI SINI

function renderProducts(f=''){
  const filtered = f ? products.filter(p=>p.category===f) : products;
  document.getElementById('productList').innerHTML = filtered.map(p=>`
    <div class="product-card" onclick="openModal(${p.id})">
      ${p.badge?`<div class="badge ${p.badge.toLowerCase().replace(' ','-')}">${p.badge}</div>`:''}
      <img src="${p.img}" class="product-img" loading="lazy">
      <div class="product-body">
        <div class="product-name">${p.name}</div>
        <div class="product-price">Rp ${p.price.toLocaleString('id-ID')}</div>
        <button class="add-to-cart" onclick="event.stopPropagation();addToCart(${p.id})">+ Keranjang</button>
      </div>
    </div>
  `).join('');
}

function openModal(id){
  const p = products.find(x=>x.id===id);
  document.getElementById('modalImg').src = p.img;
  document.getElementById('modalName').textContent = p.name;
  document.getElementById('modalPrice').textContent = 'Rp '+p.price.toLocaleString('id-ID');
  document.getElementById('modalWeight').textContent = p.weight;
  document.getElementById('modalPack').textContent = p.pack;
  document.getElementById('modalExp').textContent = p.exp;
  document.getElementById('modalStock').textContent = p.stock;
  document.getElementById('modalDesc').textContent = p.desc;
  document.getElementById('modalAddBtn').onclick = ()=>{addToCart(id);closeModal();};
  document.getElementById('productModal').classList.add('show');
}
function closeModal(){document.getElementById('productModal').classList.remove('show');}

function addToCart(id){
  const p = products.find(x=>x.id===id);
  const ex = cart.find(i=>i.id===id);
  if(ex) ex.qty++; else cart.push({...p,qty:1});
  localStorage.setItem('ngemilCart2025',JSON.stringify(cart));
  updateCart();
  showToast(p.name+' ditambahkan!');
  confetti({particleCount:100,spread:70,origin:{y:.6}});
}

function updateCart(){
  const totalQty = cart.reduce((s,i)=>s+i.qty,0);
  const totalPrice = cart.reduce((s,i)=>s+(i.price*i.qty),0);
  document.getElementById('cartCount').textContent = totalQty;
  document.getElementById('cartTotalItems').textContent = totalQty;
  document.getElementById('cartTotalPrice').textContent = totalPrice.toLocaleString('id-ID');
  document.getElementById('clearCartBtn').style.display = totalQty>0?'block':'none';
  document.getElementById('cartItems').innerHTML = cart.length?cart.map(i=>`
    <div style="display:flex;gap:20px;padding:20px 0;border-bottom:1px solid #eee;align-items:center">
      <img src="${i.img}" style="width:90px;height:90px;object-fit:cover;border-radius:14px">
      <div style="flex:1">
        <div style="font-weight:600;font-size:1.2em">${i.name}</div>
        <div style="color:var(--primary);font-weight:700">Rp ${(i.price*i.qty).toLocaleString('id-ID')}</div>
        <div style="margin-top:10px;display:flex;align-items:center;gap:15px">
          <button onclick="changeQty(${i.id},-1)" style="width:40px;height:40px;border-radius:50%;border:2px solid #ddd;background:white;font-weight:bold">-</button>
          <span style="font-weight:700;font-size:1.1em">${i.qty}</span>
          <button onclick="changeQty(${i.id},1)" style="width:40px;height:40px;border-radius:50%;border:2px solid #ddd;background:white;font-weight:bold">+</button>
        </div>
      </div>
      <i class="fas fa-trash" onclick="removeFromCart(${i.id})" style="color:#EF4444;cursor:pointer;font-size:1.6em"></i>
    </div>
  `).join(''):'<p style="text-align:center;color:#999;padding:100px 0;font-size:1.4em">Keranjang kosong</p>';
}

function changeQty(id,d){const it=cart.find(i=>i.id===id);if(it){it.qty=Math.max(1,it.qty+d);localStorage.setItem('ngemilCart2025',JSON.stringify(cart));updateCart();}}
function removeFromCart(id){cart=cart.filter(i=>i.id!==id);localStorage.setItem('ngemilCart2025',JSON.stringify(cart));updateCart();showToast('Item dihapus');}
function clearCart(){if(confirm('Kosongkan keranjang?')){cart=[];localStorage.removeItem('ngemilCart2025');updateCart();showToast('Keranjang dikosongkan');}}
function toggleCart(){document.getElementById('cartSidebar').classList.toggle('open');}

function checkout(){
  if(!cart.length)return showToast('Keranjang kosong!');
  let msg="*Pesanan Ngemil Mart*%0a%0a";
  cart.forEach(i=>msg+=`• ${i.name} × ${i.qty} = Rp ${(i.price*i.qty).toLocaleString('id-ID')}%0a`);
  msg+=%0a`*Total: Rp ${cart.reduce((s,i)=>s+(i.price*i.qty),0).toLocaleString('id-ID')}*`;
  window.open(`https://wa.me/${waNumber}?text=${msg}`,'_blank');
  confetti({particleCount:300,spread:100});
}

function filterCategory(c){renderProducts(c);}
function showToast(t){const e=document.getElementById('toast');e.textContent=t;e.classList.add('show');setTimeout(()=>e.classList.remove('show'),3000);}

document.getElementById('searchInput').addEventListener('input',function(){
  const q=this.value.toLowerCase();
  const f=products.filter(p=>p.name.toLowerCase().includes(q));
  document.getElementById('productList').innerHTML=f.map(p=>/* sama seperti renderProducts */).join('');
  // (kode render sama, untuk singkat saya pakai renderProducts lagi)
  renderProducts();
});

document.getElementById('themeToggle').addEventListener('click',()=>{document.documentElement.setAttribute('data-theme',document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark');});

window.onscroll=()=>{document.getElementById('scrollTop').style.display=(document.documentElement.scrollTop>800)?'flex':'none';};

let v=parseInt(localStorage.getItem('visits')||'0')+1;localStorage.setItem('visits',v);document.getElementById('visitorCount').textContent=v;

window.onload=()=>{document.body.classList.add('loaded');renderProducts();updateCart();};
</script>
</body>
</html>
